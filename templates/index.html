<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³Ø§ÛŒØª Ø¢Ú¯Ù‡ÛŒ Ú©Ø§Ø±</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
    <style>
        body { 
            font-family: Vazirmatn, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .navbar { 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .main-content {
            margin-top: 100px;
            padding: 2rem;
        }
        .welcome-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            margin-bottom: 3rem;
        }
        .btn-main {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            padding: 1rem 2rem;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            margin: 0.5rem;
            transition: all 0.3s ease;
            position: relative;
        }
        .btn-main:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
            color: white;
        }
        .notification-bell {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
            color: #667eea;
            margin: 0 1rem;
        }
        .notification-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .global-alert {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            max-width: 600px;
            width: 90%;
        }
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 2rem 0;
        }
        .category-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            font-weight: bold;
            color: #667eea;
        }
        .category-btn:hover, .category-btn.active {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .form-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .search-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .job-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .job-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .job-seeker { border-right: 5px solid #28a745; }
        .employer { border-right: 5px solid #007bff; }
    </style>
</head>
<body>
    <!-- Ù†ÙˆØ§Ø± Ù†Ø§ÙˆØ¨Ø±ÛŒ -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/" style="color: #667eea; font-size: 1.5rem;">
                ğŸ’¼ Ø³Ø§ÛŒØª Ø¢Ú¯Ù‡ÛŒ Ú©Ø§Ø±
            </a>
            <div class="navbar-nav ms-auto d-flex flex-row align-items-center">
                <!-- Ø²Ù†Ú¯ÙˆÙ„Ù‡ Ø§Ø¹Ù„Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø¬ÙˆÛŒØ§ÛŒ Ú©Ø§Ø± -->
                <div class="notification-bell" onclick="showNotifications('job_seeker')" title="Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¬ÙˆÛŒØ§ÛŒ Ú©Ø§Ø±">
                    ğŸ””
                    <span class="notification-count" id="job-seeker-count">0</span>
                </div>
                <!-- Ø²Ù†Ú¯ÙˆÙ„Ù‡ Ø§Ø¹Ù„Ø§Ù† Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±ÙØ±Ù…Ø§ -->
                <div class="notification-bell" onclick="showNotifications('employer')" title="Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±ÙØ±Ù…Ø§">
                    ğŸ””
                    <span class="notification-count" id="employer-count">0</span>
                </div>
                <a class="btn btn-main me-2" href="#register-section">Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ Ú©Ø§Ø±</a>
                <a class="btn btn-main" href="#jobs-section">Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯</a>
            </div>
        </div>
    </nav>

    <!-- Ù¾ÛŒØ§Ù… Ù‡Ù…Ú¯Ø§Ù†ÛŒ -->
    {% if global_message %}
    <div class="alert alert-info alert-dismissible fade show global-alert" role="alert">
        <strong>Ù¾ÛŒØ§Ù… Ù‡Ù…Ú¯Ø§Ù†ÛŒ:</strong> {{ global_message|safe }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    {% endif %}

    <div class="container main-content">
        <!-- Ú©Ø§Ø±Øª Ø®ÙˆØ´Ø§Ù…Ø¯Ú¯ÙˆÛŒÛŒ -->
        <div class="welcome-card">
            <h1 class="display-4 fw-bold mb-4" style="color: #667eea;">Ø¨Ù‡ Ø³Ø§ÛŒØª Ø¢Ú¯Ù‡ÛŒ Ú©Ø§Ø± Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯</h1>
            <p class="lead">Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ ÛŒØ§ÙØªÙ† Ú©Ø§Ø± Ùˆ Ù†ÛŒØ±ÙˆÛŒ Ú©Ø§Ø± Ø¯Ø± Ø§ÛŒØ±Ø§Ù†</p>
        </div>

        <!-- Ø¨Ø®Ø´ Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ -->
        <section id="register-section" class="form-container">
            <h2 class="text-center mb-4" style="color: #667eea;">Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ Ú©Ø§Ø±</h2>
            
            <form method="POST" action="/register" id="job-form">
                <!-- Ø§Ù†ØªØ®Ø§Ø¨ Ù†ÙˆØ¹ Ú©Ø§Ø±Ø¨Ø± -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="category-btn" onclick="selectUserType('job_seeker')" id="job-seeker-btn">
                            ğŸ” Ø¬ÙˆÛŒØ§ÛŒ Ú©Ø§Ø±
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="category-btn" onclick="selectUserType('employer')" id="employer-btn">
                            ğŸ¢ Ú©Ø§Ø±ÙØ±Ù…Ø§
                        </div>
                    </div>
                </div>

                <input type="hidden" name="job_type" id="job_type" required>

                <!-- Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø³ØªÙ‡ Ú©Ø§Ø± -->
                <h4 class="mb-3" style="color: #667eea;">Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø³ØªÙ‡ Ú©Ø§Ø±:</h4>
                <div class="category-grid">
                    <div class="category-btn" onclick="selectCategory('Ø®ÛŒØ§Ø·')">ğŸ§µ Ø®ÛŒØ§Ø·</div>
                    <div class="category-btn" onclick="selectCategory('Ø¨Ø±Ù‚â€ŒÚ©Ø§Ø±')">âš¡ Ø¨Ø±Ù‚â€ŒÚ©Ø§Ø±</div>
                    <div class="category-btn" onclick="selectCategory('Ù†Ø¬Ø§Ø±')">ğŸ”¨ Ù†Ø¬Ø§Ø±</div>
                    <div class="category-btn" onclick="selectCategory('Ù†Ù‚Ø§Ø´')">ğŸ¨ Ù†Ù‚Ø§Ø´</div>
                    <div class="category-btn" onclick="selectCategory('Ù„ÙˆÙ„Ù‡â€ŒÚ©Ø´')">ğŸ”§ Ù„ÙˆÙ„Ù‡â€ŒÚ©Ø´</div>
                    <div class="category-btn" onclick="selectCategory('ØªØ§ÛŒÙ„â€ŒÚ©Ø§Ø±')">ğŸ  ØªØ§ÛŒÙ„â€ŒÚ©Ø§Ø±</div>
                    <div class="category-btn" onclick="selectCategory('Ú©Ø§Ø±Ú¯Ø± Ø³Ø§Ø¯Ù‡')">ğŸ‘· Ú©Ø§Ø±Ú¯Ø± Ø³Ø§Ø¯Ù‡</div>
                    <div class="category-btn" onclick="selectCategory('Ø±Ø§Ù†Ù†Ø¯Ù‡')">ğŸš— Ø±Ø§Ù†Ù†Ø¯Ù‡</div>
                    <div class="category-btn" onclick="selectCategory('Ø¢Ø´Ù¾Ø²')">ğŸ‘¨â€ğŸ³ Ø¢Ø´Ù¾Ø²</div>
                    <div class="category-btn" onclick="selectCategory('Ù…Ú©Ø§Ù†ÛŒÚ©')">ğŸ”§ Ù…Ú©Ø§Ù†ÛŒÚ©</div>
                    <div class="category-btn" onclick="selectCategory('ØªØ¹Ù…ÛŒØ±Ú©Ø§Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„')">ğŸ“± ØªØ¹Ù…ÛŒØ±Ú©Ø§Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„</div>
                    <div class="category-btn" onclick="selectCategory('Ø¨Ø§ØºØ¨Ø§Ù†')">ğŸŒ± Ø¨Ø§ØºØ¨Ø§Ù†</div>
                    <div class="category-btn" onclick="selectCategory('Ø®Ø§Ù†Ù‡â€ŒØ¯Ø§Ø±')">ğŸ¡ Ø®Ø§Ù†Ù‡â€ŒØ¯Ø§Ø±</div>
                    <div class="category-btn" onclick="selectCategory('ÙØ±ÙˆØ´Ù†Ø¯Ù‡')">ğŸ›’ ÙØ±ÙˆØ´Ù†Ø¯Ù‡</div>
                    <div class="category-btn" onclick="selectCategory('Ù†Ú¯Ù‡Ø¨Ø§Ù†')">ğŸ›¡ï¸ Ù†Ú¯Ù‡Ø¨Ø§Ù†</div>
                    <div class="category-btn" onclick="selectCategory('Ù¾Ø§Ú©Ø¨Ø§Ù†')">ğŸ§¹ Ù¾Ø§Ú©Ø¨Ø§Ù†</div>
                    <div class="category-btn" onclick="selectCategory('Ø¨Ù†Ø§')">ğŸ§± Ø¨Ù†Ø§</div>
                    <div class="category-btn" onclick="selectCategory('ØªØ¹Ù…ÛŒØ±Ú©Ø§Ø± Ù„ÙˆØ§Ø²Ù… Ø®Ø§Ù†Ú¯ÛŒ')">ğŸ”Œ ØªØ¹Ù…ÛŒØ±Ú©Ø§Ø± Ù„ÙˆØ§Ø²Ù… Ø®Ø§Ù†Ú¯ÛŒ</div>
                    <div class="category-btn" onclick="selectCategory('Ø¢Ø±Ø§ÛŒØ´Ú¯Ø±')">âœ‚ï¸ Ø¢Ø±Ø§ÛŒØ´Ú¯Ø±</div>
                    <div class="category-btn" onclick="selectCategory('Ø¯Ù„Ø§Ú©')">ğŸ’† Ø¯Ù„Ø§Ú©</div>
                </div>

                <input type="hidden" name="category" id="selected_category" required>

                <!-- ØªÙˆØ¶ÛŒØ­Ø§Øª -->
                <div class="mb-3">
                    <label for="description" class="form-label fw-bold">ØªÙˆØ¶ÛŒØ­Ø§Øª Ùˆ Ø³Ø§Ø¨Ù‚Ù‡ Ú©Ø§Ø±:</label>
                    <textarea class="form-control" name="description" id="description" rows="4" required 
                              placeholder="Ù„Ø·ÙØ§Ù‹ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø®ÙˆØ¯ØŒ Ø³Ø§Ø¨Ù‚Ù‡ Ú©Ø§Ø± Ùˆ Ø´Ø±Ø§ÛŒØ· Ú©Ø§Ø±ÛŒ Ø®ÙˆØ¯ ØªÙˆØ¶ÛŒØ­ Ø¯Ù‡ÛŒØ¯..."></textarea>
                </div>

                <!-- Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ -->
                <div class="mb-4">
                    <label for="phone" class="form-label fw-bold">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³:</label>
                    <input type="tel" class="form-control" name="phone" id="phone" required 
                           placeholder="09123456789">
                </div>

                <button type="submit" class="btn btn-main btn-lg w-100">
                    âœ… Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ
                </button>
            </form>
        </section>

        <!-- Ø¨Ø®Ø´ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ -->
        <section id="jobs-section" class="form-container">
            <h2 class="text-center mb-4" style="color: #667eea;">Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯</h2>
            
            <!-- Ø¬Ø³ØªØ¬Ùˆ -->
            <div class="search-container">
                <div class="row">
                    <div class="col-md-10">
                        <input type="text" class="form-control" id="search-input" 
                               placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ (Ù†Ø§Ù… Ø´ØºÙ„ ÛŒØ§ ØªÙˆØ¶ÛŒØ­Ø§Øª)...">
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-main w-100" onclick="searchJobs()">ğŸ” Ø¬Ø³ØªØ¬Ùˆ</button>
                    </div>
                </div>
            </div>

            <div id="jobs-container">
                <!-- Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ Ø¨Ø§ Ajax Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </div>
        </section>
    </div>

    <!-- Modal Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ -->
    <div class="modal fade" id="notificationModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="notification-content">
                    <!-- Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø¨Ø³ØªÙ†</button>
                    <button type="button" class="btn btn-danger" id="clear-notifications">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let selectedUserType = '';
        let selectedCategory = '';
        let currentNotificationType = '';

        // Ø§Ù†ØªØ®Ø§Ø¨ Ù†ÙˆØ¹ Ú©Ø§Ø±Ø¨Ø±
        function selectUserType(type) {
            selectedUserType = type;
            document.getElementById('job_type').value = type;
            
            // ØªØºÛŒÛŒØ± Ø§Ø³ØªØ§ÛŒÙ„ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
            document.getElementById('job-seeker-btn').classList.remove('active');
            document.getElementById('employer-btn').classList.remove('active');
            document.getElementById(type === 'job_seeker' ? 'job-seeker-btn' : 'employer-btn').classList.add('active');
            
            // ØªØºÛŒÛŒØ± Ù…ØªÙ† placeholder
            const placeholder = type === 'job_seeker' ? 
                'Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø®ÙˆØ¯ØŒ Ø³Ø§Ø¨Ù‚Ù‡ Ú©Ø§Ø± Ùˆ Ù…Ù‡Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ ØªÙˆØ¶ÛŒØ­ Ø¯Ù‡ÛŒØ¯...' :
                'Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø´Ø±Ø§ÛŒØ· Ú©Ø§Ø±ØŒ Ù†ÙˆØ¹ Ù‡Ù…Ú©Ø§Ø±ÛŒ Ùˆ Ù…Ø²Ø§ÛŒØ§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ ØªÙˆØ¶ÛŒØ­ Ø¯Ù‡ÛŒØ¯...';
            document.getElementById('description').placeholder = placeholder;
        }

        // Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø³ØªÙ‡ Ú©Ø§Ø±
        function selectCategory(category) {
            selectedCategory = category;
            document.getElementById('selected_category').value = category;
            
            // ØªØºÛŒÛŒØ± Ø§Ø³ØªØ§ÛŒÙ„ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§
        function searchJobs() {
            const query = document.getElementById('search-input').value;
            loadJobs(query);
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§
        function loadJobs(searchQuery = '') {
            const url = searchQuery ? `/jobs?search=${encodeURIComponent(searchQuery)}` : '/jobs';
            
            fetch(url)
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const jobsContent = doc.querySelector('.container').innerHTML;
                    
                    document.getElementById('jobs-container').innerHTML = jobsContent;
                });
        }

        // Ù†Ù…Ø§ÛŒØ´ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§
        function showNotifications(type) {
            currentNotificationType = type;
            
            fetch(`/notifications?type=${type}`)
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const notificationContent = doc.querySelector('.container').innerHTML;
                    
                    document.getElementById('notification-content').innerHTML = notificationContent;
                    
                    const modal = new bootstrap.Modal(document.getElementById('notificationModal'));
                    modal.show();
                });
        }

        // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§
        document.getElementById('clear-notifications').addEventListener('click', function() {
            if (currentNotificationType) {
                fetch(`/clear_notifications?type=${currentNotificationType}`)
                    .then(() => {
                        document.getElementById('notification-content').innerHTML = '<p class="text-center">Ù‡ÛŒÚ† Ø§Ø¹Ù„Ø§Ù†ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>';
                        updateNotificationCounts();
                    });
            }
        });

        // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ØªØ¹Ø¯Ø§Ø¯ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§
        function updateNotificationCounts() {
            // Ø¬ÙˆÛŒØ§ÛŒ Ú©Ø§Ø±
            fetch('/notifications?type=job_seeker')
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const notifications = doc.querySelectorAll('.job-card');
                    document.getElementById('job-seeker-count').textContent = notifications.length;
                });

            // Ú©Ø§Ø±ÙØ±Ù…Ø§
            fetch('/notifications?type=employer')
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const notifications = doc.querySelectorAll('.job-card');
                    document.getElementById('employer-count').textContent = notifications.length;
                });
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            loadJobs();
            updateNotificationCounts();
            
            // Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø§ Enter
            document.getElementById('search-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchJobs();
                }
            });

            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ ØªØ¹Ø¯Ø§Ø¯ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§
            setInterval(updateNotificationCounts, 30000); // Ù‡Ø± 30 Ø«Ø§Ù†ÛŒÙ‡
        });

        // Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    {% if category == 'success' %}
                        document.addEventListener('DOMContentLoaded', function() {
                            const alertDiv = document.createElement('div');
                            alertDiv.className = 'alert alert-success alert-dismissible fade show global-alert';
                            alertDiv.innerHTML = `
                                <strong>âœ… Ù…ÙˆÙÙ‚!</strong> {{ message }}
                                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                            `;
                            document.body.appendChild(alertDiv);
                            
                            setTimeout(() => {
                                alertDiv.remove();
                            }, 5000);
                        });
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% endwith %}
    </script>
</body>
                      </html>
